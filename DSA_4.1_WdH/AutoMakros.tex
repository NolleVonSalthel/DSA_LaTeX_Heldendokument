%----------------------------
%	The fancy stuff

%I-T-E kram


% Grundwerte
\newcounter{cMUaktuell}
\setcounter{cMUaktuell}{\EigMUgesteigert}
\def \EigMUaktuell{\arabic{cMUaktuell}}
\newcounter{cKLaktuell}
\setcounter{cKLaktuell}{\EigKLgesteigert}
\def \EigKLaktuell{\arabic{cKLaktuell}}
\newcounter{cINaktuell}
\setcounter{cINaktuell}{\EigINgesteigert}
\def \EigINaktuell{\arabic{cINaktuell}}
\newcounter{cCHaktuell}
\setcounter{cCHaktuell}{\EigCHgesteigert}
\def \EigCHaktuell{\arabic{cCHaktuell}}
\newcounter{cFFaktuell}
\setcounter{cFFaktuell}{\EigFFgesteigert}
\def \EigFFaktuell{\arabic{cFFaktuell}}
\newcounter{cGEaktuell}
\setcounter{cGEaktuell}{\EigGEgesteigert}
\def \EigGEaktuell{\arabic{cGEaktuell}}
\newcounter{cKOaktuell}
\setcounter{cKOaktuell}{\EigKOgesteigert}
\def \EigKOaktuell{\arabic{cKOaktuell}}
\newcounter{cKKaktuell}
\setcounter{cKKaktuell}{\EigKKgesteigert}
\def \EigKKaktuell{\arabic{cKKaktuell}}

% Berechnung der abgeleiteten Grundwerte
\newcounter{cLePstart} % Lebenspunkte: (KO + KO + KK)/2
\setcounter{cLePstart}{(\EigMUaktuell + \EigMUaktuell + \EigKKaktuell + 1) / 2}
\def \BasisLEstart{\arabic{cLePstart}}
\newcounter{cLePmaxZ}
\setcounter{cLePmaxZ}{(\EigKOaktuell + 1) / 2}
\def \BasisLEmaxZugekauft{\arabic{cLePmaxZ}}
\newcounter{cLePaktuell}
\setcounter{cLePaktuell}{\BasisLEmod + \BasisLEstart + \BasisLEzugekauft}
\def \BasisLEaktuell{\arabic{cLePaktuell}}
\newcounter{cLePhaelfte}
\setcounter{cLePhaelfte}{(\BasisLEaktuell + 1) / 2}
\def \BasisLEaktuellHaelfte{\arabic{cLePhaelfte}}
\newcounter{cLePdrittel}
\setcounter{cLePdrittel}{(\BasisLEaktuell + 1) / 3}
\def \BasisLEaktuellDrittel{\arabic{cLePdrittel}}
\newcounter{cLePviertel}
\setcounter{cLePviertel}{(\BasisLEaktuell + 2) / 4}
\def \BasisLEaktuellViertel{\arabic{cLePviertel}}

\newcounter{cAuPstart} % Ausdauer: (MU + KO + GE)/2
\setcounter{cAuPstart}{(\EigMUaktuell + \EigKOaktuell + \EigGEaktuell + 1) / 2}
\def \BasisAUstart{\arabic{cAuPstart}}
\newcounter{cAuPmaxZ}
\setcounter{cAuPmaxZ}{\EigKOaktuell}
\def \BasisAUmaxZugekauft{\arabic{cAuPmaxZ}}
\newcounter{cAuPaktuell}
\setcounter{cAuPaktuell}{\BasisAUmod + \BasisAUstart + \BasisAUzugekauft}
\def \BasisAUaktuell{\arabic{cAuPaktuell}}
\newcounter{cAuPhaelfte}
\setcounter{cAuPhaelfte}{(\BasisAUaktuell + 1) / 2}
\def \BasisAUaktuellHaelfte{\arabic{cAuPhaelfte}}
\newcounter{cAuPdrittel}
\setcounter{cAuPdrittel}{(\BasisAUaktuell + 1) / 3}
\def \BasisAUaktuellDrittel{\arabic{cAuPdrittel}}
\newcounter{cAuPviertel}
\setcounter{cAuPviertel}{(\BasisAUaktuell + 2) / 4}
\def \BasisAUaktuellViertel{\arabic{cAuPviertel}}

\newcounter{cAEstart} % Astralenergie: (MU + IN + CH) / 2
\setcounter{cAEstart}{(\EigMUaktuell + \EigINaktuell + \EigCHaktuell + 1) / 2}
\def \BasisAEstart{\arabic{cAEstart}}
\def \BasisAEmaxZugekauft{\EigCHaktuell}
\newcounter{cAEaktuell}
\setcounter{cAEaktuell}{\BasisAEmod + \BasisAEstart + \BasisAEzugekauft}
\def \BasisAEaktuell{\arabic{cAEaktuell}}

%\newcommand{\IstGeweiht}{\IfSubStr{\gw}{true}{1}{0}}
%\newcounter{kemod}
%\setcounter{kemod}{\BasisKEmod * \IstGeweiht}
%\def \BasisKEmod{\arabic{kemod}}

\newcounter{cMRstart} % Magieresistenz: (MU + KL + KO) / 5
\setcounter{cMRstart}{(\EigMUaktuell + \EigKLaktuell + \EigKOaktuell + 3) / 5}
\def \BasisMRstart{\arabic{cMRstart}}
\newcounter{cMRmaxZ}
\setcounter{cMRmaxZ}{(\EigMUaktuell + 1) / 2}
\def \BasisMRmaxZugekauft{\arabic{cMRmaxZ}}
\newcounter{cMRaktuell}
\setcounter{cMRaktuell}{\BasisMRmod + \BasisMRstart + \BasisMRzugekauft}
\def \BasisMRaktuell{\arabic{cMRaktuell}}

\newcounter{cINIstart} % Initiative-Basis: (MU + MU + IN + GE) / 5
\setcounter{cINIstart}{(\EigMUaktuell + \EigMUaktuell + \EigINaktuell + \EigGEaktuell + 3) / 5}
\def \BasisINIstart{\arabic{cINIstart}}
%TODO SF einberechnen
\newcounter{cINIaktuell}
\setcounter{cINIaktuell}{\BasisINImod + \BasisINIstart}
\def \BasisINIaktuell{\arabic{cINIaktuell}}

\newcounter{cATstart} % Angriff-Basis: (MU + GE + KK) / 5
\setcounter{cATstart}{(\EigMUaktuell + \EigGEaktuell + \EigKKaktuell + 3) / 5}
\def \BasisATstart{\arabic{cATstart}}
\newcounter{cATaktuell}
\setcounter{cATaktuell}{\BasisATmod + \BasisATstart}
\def \BasisATaktuell{\arabic{cATaktuell}}

\newcounter{cPAstart} % Parade-Basis: (IN + GE + KK) / 5
\setcounter{cPAstart}{(\EigINaktuell + \EigGEaktuell + \EigKKaktuell + 3) / 5}
\def \BasisPAstart{\arabic{cPAstart}}
\newcounter{cPAaktuell}
\setcounter{cPAaktuell}{\BasisPAmod + \BasisPAstart}
\def \BasisPAaktuell{\arabic{cPAaktuell}}

\newcounter{cFKstart} % Fernkampf-Basis: (IN + FF + KK) / 5
\setcounter{cFKstart}{(\EigINaktuell + \EigFFaktuell + \EigKKaktuell + 3) / 5}
\def \BasisFKstart{\arabic{cFKstart}}
\newcounter{cFKaktuell}
\setcounter{cFKaktuell}{\BasisFKmod + \BasisFKstart}
\def \BasisFKaktuell{\arabic{cFKaktuell}}

\newcounter{cWSstart} % Wundschwelle: KO / 2
\setcounter{cWSstart}{(\EigKOaktuell + 1) / 2}
\def \BasisWundschwelle{\arabic{cWSstart}}

% dieses Makro gibt das Zeichen f체r eine Sonderfertigkeit zur체ck
% Also angekreuzt wenn gew채hlt und leer wenn nicht
\def \dasKreuzchen{$\boxtimes$}%<-- das Kreuzchen Symbol
\def \dasNichtKreuzchen{$\square$}%<-- das NichtKreuzchen Symbol
\newcommand{\SFKreuzchen}[1]{%
\IfSubStr{\SonderfertigkeitenNahkampfA\SonderfertigkeitenNahkampfB\SonderfertigkeitenNahkampfC
\SFausserKampfA\SFausserKampfB\SFausserKampfC\SFausserKampfD\SFausserKampfE\SFausserKampfF}{#1}
{\dasKreuzchen}{\dasNichtKreuzchen}%
}

%----------------------------
%	Kampfwerte
\def \KampfwerteTrenner{\ $\bullet$\ }
% Basis Kampftechniken
\def \KampfwerteDolche{\makebox[2.5mm][c]{\TalentDolcheAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentDolchePA}}
\def \KampfwerteHiebwaffen{\makebox[2.5mm][c]{\TalentHiebwaffenAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentHiebwaffenPA}}
\def \KampfwerteRaufen{\makebox[2.5mm][c]{\TalentRaufenAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentRaufenPA}}
\def \KampfwerteRingen{\makebox[2.5mm][c]{\TalentRingenAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentRingenPA}}
\def \KampfwerteSaebel{\makebox[2.5mm][c]{\TalentSaebelAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentSaebelPA}}
\def \KampfwerteWurfmesser{\makebox[2.5mm][c]{\TalentWurfmesserAT}\KampfwerteTrenner\makebox[2.5mm][c]{-}}

% Extra Kampftechniken
\def \KampfwerteKampfExtraA{\makebox[2.5mm][c]{\TalentKampfExtraAAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraAPA}}
\def \KampfwerteKampfExtraB{\makebox[2.5mm][c]{\TalentKampfExtraBAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraBPA}}
\def \KampfwerteKampfExtraC{\makebox[2.5mm][c]{\TalentKampfExtraCAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraCPA}}
\def \KampfwerteKampfExtraD{\makebox[2.5mm][c]{\TalentKampfExtraDAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraDPA}}
\def \KampfwerteKampfExtraE{\makebox[2.5mm][c]{\TalentKampfExtraEAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraEPA}}
\def \KampfwerteKampfExtraF{\makebox[2.5mm][c]{\TalentKampfExtraFAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraFPA}}
\def \KampfwerteKampfExtraG{\makebox[2.5mm][c]{\TalentKampfExtraGAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraGPA}}
\def \KampfwerteKampfExtraH{\makebox[2.5mm][c]{\TalentKampfExtraHAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraHPA}}
\def \KampfwerteKampfExtraI{\makebox[2.5mm][c]{\TalentKampfExtraIAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraIPA}}
\def \KampfwerteKampfExtraJ{\makebox[2.5mm][c]{\TalentKampfExtraJAT}\KampfwerteTrenner\makebox[2.5mm][c]{\TalentKampfExtraJPA}}

%----------------------------
%	Zauberbef체llung
\makeatletter
\newcounter{ZauberCounter}
\ifnum\value{ZauberAnzahl}>32
	\forloop[1]{ZauberCounter}{\value{ZauberAnzahl}}{\value{ZauberCounter} < 66}{%
		\g@addto@macro\ZauberTabelleInhaltB{&&&&&&&&&&&&&\\\hline}%
	}
\else
	\forloop{ZauberCounter}{\value{ZauberAnzahl}}{\value{ZauberCounter} < 33}{%
		\g@addto@macro\ZauberTabelleInhaltA{&&&&&&&&&&&&&\\\hline}%
	}
\fi
\makeatother
